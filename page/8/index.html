<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
       
      <meta name="keywords" content="RS,GPS,GIS,QGIS,Opticks,QT,OpenCV,OSG" />
       
      <meta name="description" content="地理信息系统，遥感科学，卫星导航定位技术综合研究。" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> 帕拉丁的游鱼</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="帕拉丁的游鱼" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">帕拉丁的游鱼</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-通信规约与协议的区别和联系"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/10/28/%E9%80%9A%E4%BF%A1%E8%A7%84%E7%BA%A6%E4%B8%8E%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/"
    >通信规约与协议的区别和联系</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/10/28/%E9%80%9A%E4%BF%A1%E8%A7%84%E7%BA%A6%E4%B8%8E%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB/" class="article-date">
  <time datetime="2023-10-28T02:28:00.000Z" itemprop="datePublished">2023-10-28</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%9F%A5%E8%AF%86%E5%88%86%E4%BA%AB/">知识分享</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><a target="_blank" rel="noopener" href="https://www.techphant.cn/blog/2305.html">https://www.techphant.cn/blog/2305.html</a><br>通信规约与协议的区别和联系？<br>作者： 技象物联网 / 行业百科 / 通信系统, 通讯规约 / 2023年5月28日 23:34:29</p>
<p>在计算机网络中，通信规约和协议是两个非常重要的概念。它们都是用于确保计算机之间的正常通信和数据传输的工具，但它们之间有着一些区别和联系。本文将会对这些问题做出详细解释。</p>
<p>一、通信规约</p>
<p>通信规约是指在计算机网络中，数据传输所遵循的具体规范和标准。它包括了数据格式、传输速率、传输距离、错误检测等方面的要求。通信规约不仅适用于计算机网络，还适用于其他各种类型的通信系统。</p>
<p>通信规约的主要作用是确保不同设备之间可以正常地进行数据交换和信息共享。由于不同设备之间可能存在着硬件或软件上的差异，因此需要制定统一的规范来保证它们之间能够相互兼容和交互。</p>
<p>二、协议</p>
<p>协议是指在计算机网络中，不同设备之间进行通信所必须遵循的一套规则和标准。协议包括了数据格式、传输方式、错误处理等方面的内容。与通信规约不同，协议更加注重不同设备之间进行交互时所必须遵循的行为准则。</p>
<p>协议的主要作用是确保不同设备之间可以进行有效的通信和数据传输。在计算机网络中，协议可以分为两种类型：传输层协议和应用层协议。传输层协议用于确保数据在网络中的可靠性和完整性，而应用层协议则负责处理特定类型的数据。</p>
<p>三、区别与联系</p>
<p>通信规约和协议都是在计算机网络中使用的一套规范和标准，但它们之间存在着一些区别和联系。</p>
<p>首先，通信规约更加注重数据传输的技术细节，包括了数据格式、传输速率、传输距离、错误检测等方面。而协议更加注重不同设备之间进行交互时所必须遵循的行为准则。</p>
<p>其次，通信规约是为了确保不同设备之间能够相互兼容和交互而制定的一套标准。而协议则是为了确保不同设备之间可以进行有效的通信和数据传输而制定的一套规则。</p>
<p>最后，通信规约往往具有较高的普适性，在各种不同类型的通信系统中都可以使用。而协议则更加具有针对性，在特定领域或特定应用中使用。</p>
<p>总的来说，通信规约和协议都是计算机网络中非常重要的工具。它们在不同的层次上确保了计算机之间的正常通信和数据传输，同时也为计算机网络的发展提供了支持和保障。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%80%9A%E4%BF%A1/" rel="tag">通信</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Python图像处理程序知识笔记"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/10/27/Python%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0/"
    >Python图像处理程序知识笔记</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/10/27/Python%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0/" class="article-date">
  <time datetime="2023-10-27T02:27:00.000Z" itemprop="datePublished">2023-10-27</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="3-1-读取文件函数"><a href="#3-1-读取文件函数" class="headerlink" title="3.1 读取文件函数"></a>3.1 读取文件函数</h1><p>PyQt中QFileDialog常用来打开保存文件或打开文件对话框，允许用户选择本地文件或者文件夹，</p>
<p>常用方法有：</p>
<p>QFileDialog.getOpenFileName()    #获取一个打开文件的文件名<br>QFileDialog.getOpenFileNames()   #获取多个打开文件的文件名<br>QFileDialog.getExistingDirectory()  #获取打开文件夹的文件名<br>QFileDialog.getOpenFileUrl()     #获取一个打开文件的统一资源定位符<br>QFileDialog.getOpenFileUrls()    #获取多个打开文件的统一资源定位符<br>QFileDialog.getSaveFileName()    #获取保存的文件名<br>QFileDialog.getSaveFileUrl()     #获取保存的url</p>
<h2 id="3-1-1-打开本地图片"><a href="#3-1-1-打开本地图片" class="headerlink" title="3.1.1 打开本地图片"></a>3.1.1 打开本地图片</h2><p>QFileDialog.getOpenFileName()返回值有两个，第一个是选择文件的文件名（文件路径），我们可以通过这个文件名打开本地文件，第二个是选择文件的类型。</p>
<p>输入有4个参数，第一个参数一般是self，第2个参数是弹出框的标题，第3个参数是打开对话框的默认地址，第4个参数是过滤字符串，一般用来限制文件类型，定义打开文件下拉框中的可选列表，并且不同的文件类型用两个分号;;隔开。</p>
<pre><code># 选择本地图片上传
def openImage(self):
global imgNamepath  # 这里为了方便别的地方引用图片路径，将其设置为全局变量

# 弹出一个文件选择框，第一个返回值imgName记录选中的文件路径+文件名，第二个返回值imgType记录文件的类型
# QFileDialog就是系统对话框的那个类第一个参数是上下文，第二个参数是弹框的名字，第三个参数是默认打开的路径，第四个参数是需要的格式

imgNamepath, imgType = QFileDialog.getOpenFileName(self.centralwidget, &quot;选择图片&quot;,
                                                   &quot;D:\\&quot;,&quot;*.jpg;;*.png;;All Files(*)&quot;)
# 通过文件路径获取图片文件，并设置图片长宽为label控件的长、宽
img = QtGui.QPixmap(imgNamepath).scaled(self.label_3.width(), self.label_3.height())

# 在label控件上显示选择的图片
self.label_3.setPixmap(img)

# 显示所选图片的路径
self.lineEdit_3.setText(imgNamepath)
</code></pre>
<h2 id="3-1-2-保存图片到本地"><a href="#3-1-2-保存图片到本地" class="headerlink" title="3.1.2 保存图片到本地"></a>3.1.2 保存图片到本地</h2><p>（1）保存图片到本地的第一种方式:首先把图片所在label控件截图，然后打开一个保存文件的弹出框，最后保存截图到选中的路径。</p>
<pre><code>def saveImage(self):
    screen = QApplication.primaryScreen()
    pix = screen.grabWindow(self.label_4.winId())
    fpath, ftype = QFileDialog.getSaveFileName(self.centralwidget, &quot;保存图片&quot;, &quot;d:\\&quot;, &quot;*.jpg;;*.png;;All Files(*)&quot;)
    pix.save(fpath)
</code></pre>
<p>（2）保存图片到本地的第二种方式:首先提取相对应Qlabel中的图片，然后打开一个保存文件的弹出框，最后保存图片到选中的路径。</p>
<pre><code>def saveImage(self):
    # 提取Qlabel中的图片
    img = self.label_4.pixmap().toImage()
    fpath, ftype = QFileDialog.getSaveFileName(self.centralwidget, &quot;保存图片&quot;, &quot;d:\\&quot;, &quot;*.jpg;;*.png;;All Files(*)&quot;)
    img.save(fpath)
</code></pre>
<p>以下函数读取文件函数在此实验没用到，只是用来记录</p>
<h2 id="3-1-3-打开文件夹"><a href="#3-1-3-打开文件夹" class="headerlink" title="3.1.3 打开文件夹"></a>3.1.3 打开文件夹</h2><pre><code># 打开文件夹（目录）
def openDirectory(self):
fd = QFileDialog.getExistingDirectory(self.centralwidget, &quot;选择文件夹&quot;, &quot;&quot;)

# 这里的label_directoryPath要根据项目替换成自己的组件
self.label_directoryPath.setText(fd)   
</code></pre>
<h2 id="3-1-4-打开本地文本文件并显示"><a href="#3-1-4-打开本地文本文件并显示" class="headerlink" title="3.1.4 打开本地文本文件并显示"></a>3.1.4 打开本地文本文件并显示</h2><pre><code># 选择文本文件上传
    def openTextFile(self):  # 选择文本文件上传
    fd, fp = QFileDialog.getOpenFileName(self.centralwidget, &quot;选择文件&quot;, &quot;d:\\&quot;, &quot;*.txt;;All Files(*)&quot;)
    f = open(fd, &#39;r&#39;)
    self.label_txt.setText(f.read())
    self.label_filePath.setText(fd)
    f.close()
</code></pre>
<h2 id="3-1-5-保存文本到本地"><a href="#3-1-5-保存文本到本地" class="headerlink" title="3.1.5 保存文本到本地"></a>3.1.5 保存文本到本地</h2><pre><code># 保存文本文件
def saveTextFile(self):
fd, fp = QFileDialog.getSaveFileName(self.centralwidget, &quot;保存文件&quot;, &quot;d:\\&quot;, &quot;*.txt;;All Files(*)&quot;)
f = open(fd, &#39;w&#39;)
f.write(self.label_txt.text())
f.close()
</code></pre>
<h2 id="3-1-6-Qimage转换为mat类型"><a href="#3-1-6-Qimage转换为mat类型" class="headerlink" title="3.1.6 Qimage转换为mat类型"></a>3.1.6 Qimage转换为mat类型</h2><pre><code># 将Qimage转换为mat类型
def qimage_to_mat(self,qimg):
ptr = qimg.consBits()
ptr.setsize(qimg.byteCount())
mat = np.array(ptr).reshape(qimg.height(),qimg.width(),4)   # 注意通道数要填4，否则报错
return mat
</code></pre>
<h1 id="3-2-关联函数"><a href="#3-2-关联函数" class="headerlink" title="3.2 关联函数"></a>3.2 关联函数</h1><pre><code># 按钮关联函数
self.pushButton_2.clicked.connect(self.openImage)
self.pushButton_3.clicked.connect(self.startAction)
self.pushButton_4.clicked.connect(self.saveImage)
</code></pre>
<p>注意函数名后面没有括号，和方法调用有点不一样self.openImage和self.openImage().</p>
<p>素描图像生成函数：</p>
<pre><code># 生成素描图
def startAction(self):
    img = cv2.imread(imgNamepath)
    img = cv2.resize(img, dsize=(768, 1080))
    # 图像转灰度图像
    gray_image = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
    # 灰度图像到反转灰度图像
    inverted_gray_image = 255 - gray_image
    # 模糊倒置灰度图像
    blurred_inverted_gray_image = cv2.GaussianBlur(inverted_gray_image, (19, 19), 0)
    # 反转模糊图像
    inverted_blurred_image = 255 - blurred_inverted_gray_image
    # 准备照片素描
    sketck = cv2.divide(gray_image, inverted_blurred_image, scale=256.0)
 
    path = &quot;D:\\python\\RRJ\\pycharmProject2\\zhanCunDiZhi\\&quot;
    # 因为不知道怎么将&lt;class &#39;numpy.ndarray&#39;&gt;转换为&lt;class &#39;PyQt5.QtGui.QPixmap&#39;&gt;类型，因此采用暂存再读出的方式
    cv2.imwrite(path + &#39;ZC.jpg&#39;, sketck)
    # pyqt5从路径读取图片
    imgShow = QPixmap(path + &#39;ZC.jpg&#39;)
    self.label_4.setScaledContents(True)
    self.label_4.setPixmap(imgShow)
</code></pre>
<p>————————————————<br>版权声明：本文为CSDN博主「༄༄小半生༅࿐」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_47682721/article/details/123928585">https://blog.csdn.net/m0_47682721/article/details/123928585</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-PYQT5实现图片显示"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/10/26/PYQT5%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA/"
    >PYQT5实现图片显示</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/10/26/PYQT5%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA/" class="article-date">
  <time datetime="2023-10-26T02:26:00.000Z" itemprop="datePublished">2023-10-26</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="版本一"><a href="#版本一" class="headerlink" title="版本一"></a>版本一</h1><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/TM0831/p/12733571.html">https://www.cnblogs.com/TM0831/p/12733571.html</a></p>
<pre><code>import sys

from PyQt5.QtGui import QImageReader
from PyQt5.QtWidgets import QWidget, QApplication, QVBoxLayout, QHBoxLayout, QPushButton, QLabel, QFileDialog
from PyQt5.Qt import QPixmap, QPoint, Qt, QPainter, QIcon
from PyQt5.QtCore import QSize

class ImageBox(QWidget):
    def __init__(self):
        super(ImageBox, self).__init__()
        self.img = None
        self.scaled_img = None
        self.point = QPoint(0, 0)
        self.start_pos = None
        self.end_pos = None
        self.left_click = False
        self.scale = 1

    def init_ui(self):
        self.setWindowTitle(&quot;ImageBox&quot;)

    def set_image(self, img_path):
        &quot;&quot;&quot;
        open image file
        :param img_path: image file path
        :return:
        &quot;&quot;&quot;
        # img = QImageReader(img_path)
        # img.setScaledSize(QSize(self.size().width(), self.size().height()))
        # img = img.read()
        self.img = QPixmap(img_path)
        self.scaled_img = self.img

    def paintEvent(self, e):
        &quot;&quot;&quot;
        receive paint events
        :param e: QPaintEvent
        :return:
        &quot;&quot;&quot;
        if self.scaled_img:
            painter = QPainter()
            painter.begin(self)
            painter.scale(self.scale, self.scale)
            painter.drawPixmap(self.point, self.scaled_img)
            painter.end()

    def mouseMoveEvent(self, e):
        &quot;&quot;&quot;
        mouse move events for the widget
        :param e: QMouseEvent
        :return:
        &quot;&quot;&quot;
        if self.left_click:
            size = self.size().width()
            self.end_pos = e.pos() - self.start_pos
            self.point = self.point + self.end_pos
            self.start_pos = e.pos()
            self.repaint()

    def mousePressEvent(self, e):
        &quot;&quot;&quot;
        mouse press events for the widget
        :param e: QMouseEvent
        :return:
        &quot;&quot;&quot;
        if e.button() == Qt.LeftButton:
            self.left_click = True
            self.start_pos = e.pos()

    def mouseReleaseEvent(self, e):
        &quot;&quot;&quot;
        mouse release events for the widget
        :param e: QMouseEvent
        :return:
        &quot;&quot;&quot;
        if e.button() == Qt.LeftButton:
            self.left_click = False

class MainDemo(QWidget):
    def __init__(self):
        super(MainDemo, self).__init__()

        self.setWindowTitle(&quot;Image Viewer&quot;)
        self.setFixedSize(1000, 600)

        self.open_file = QPushButton(&quot;Open Image&quot;)
        self.open_file.setToolTip(&quot;Open the image to view.&quot;)
        self.open_file.clicked.connect(self.open_image)
        self.open_file.setFixedSize(150, 30)

        self.zoom_in = QPushButton(&quot;&quot;)
        self.zoom_in.clicked.connect(self.large_click)
        self.zoom_in.setFixedSize(30, 30)
        in_icon = QIcon(&quot;icons/zoomIn.png&quot;)
        self.zoom_in.setIcon(in_icon)
        self.zoom_in.setIconSize(QSize(30, 30))

        self.zoom_out = QPushButton(&quot;&quot;)
        self.zoom_out.clicked.connect(self.small_click)
        self.zoom_out.setFixedSize(30, 30)
        out_icon = QIcon(&quot;icons/zoomOut.png&quot;)
        self.zoom_out.setIcon(out_icon)
        self.zoom_out.setIconSize(QSize(30, 30))

        w = QWidget(self)
        layout = QHBoxLayout()
        layout.addWidget(self.open_file)
        layout.addWidget(self.zoom_in)
        layout.addWidget(self.zoom_out)
        layout.setAlignment(Qt.AlignLeft)
        w.setLayout(layout)
        w.setFixedSize(300, 50)

        self.box = ImageBox()
        self.box.setFixedSize(500,500)

        layout = QVBoxLayout()
        layout.addWidget(w)
        layout.addWidget(self.box)
        self.setLayout(layout)

    def open_image(self):
        &quot;&quot;&quot;
        select image file and open it
        :return:
        &quot;&quot;&quot;
        # img_name, _ = QFileDialog.getOpenFileName(self, &quot;打开图片&quot;, &quot;&quot;, &quot;All Files(*);;*.jpg;;*.png&quot;)
        img_name, _ = QFileDialog.getOpenFileName(self, &quot;Open Image File&quot;,&quot;&quot;,&quot;All Files(*);;*.jpg;;*.png;;*.jpeg&quot;)
        self.box.set_image(img_name)

    def large_click(self):
        &quot;&quot;&quot;
        used to enlarge image
        :return:
        &quot;&quot;&quot;
        if self.box.scale &lt; 2:
            self.box.scale += 0.1
            self.box.adjustSize()
            self.update()

    def small_click(self):
        &quot;&quot;&quot;
        used to reduce image
        :return:
        &quot;&quot;&quot;
        if self.box.scale &gt; 0.3:
            self.box.scale -= 0.2
            self.box.adjustSize()
            self.update()

if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    box = MainDemo()
    box.show()
    app.exec_()
</code></pre>
<h1 id="版本二"><a href="#版本二" class="headerlink" title="版本二"></a>版本二</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42743778/article/details/118567409">https://blog.csdn.net/qq_42743778/article/details/118567409</a></p>
<pre><code># -*- coding: utf-8 -*-

# Form implementation generated from reading ui file &#39;top-half.ui&#39;
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.

import sys
from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtGui import QImageReader
from PyQt5.QtWidgets import QWidget, QApplication, QVBoxLayout, QHBoxLayout, QPushButton, QLabel, QFileDialog
from PyQt5.Qt import QPixmap, QPoint, Qt, QPainter, QIcon
from PyQt5.QtCore import QSize


class ImageBox(QWidget):
    def __init__(self):
        super(ImageBox, self).__init__()
        self.img = None
        self.scaled_img = None
        self.point = QPoint(0, 0)
        self.start_pos = None
        self.end_pos = None
        self.left_click = False
        self.scale = 1

    def init_ui(self):
        self.setWindowTitle(&quot;ImageBox&quot;)

    def set_image(self, img_path):
        &quot;&quot;&quot;
        open image file
        :param img_path: image file path
        :return:
        &quot;&quot;&quot;
        # img = QImageReader(img_path)
        # img.setScaledSize(QSize(self.size().width(), self.size().height()))
        # img = img.read()
        self.img = QPixmap(img_path)
        self.scaled_img = self.img

    def paintEvent(self, e):
        &quot;&quot;&quot;
        receive paint events
        :param e: QPaintEvent
        :return:
        &quot;&quot;&quot;
        if self.scaled_img:
            painter = QPainter()
            painter.begin(self)
            painter.scale(self.scale, self.scale)
            painter.drawPixmap(self.point, self.scaled_img)
            painter.end()

    def wheelEvent(self, event):
        angle = event.angleDelta() / 8  # 返回QPoint对象，为滚轮转过的数值，单位为1/8度
        angleY = angle.y()
        # 获取当前鼠标相对于view的位置
        if angleY &gt; 0:
            self.scale *= 1.1
        else:  # 滚轮下滚
            self.scale *= 0.9
        self.adjustSize()
        self.update()


    def mouseMoveEvent(self, e):
        &quot;&quot;&quot;
        mouse move events for the widget
        :param e: QMouseEvent
        :return:
        &quot;&quot;&quot;
        if self.left_click:
            self.end_pos = e.pos() - self.start_pos
            self.point = self.point + self.end_pos
            self.start_pos = e.pos()
            self.repaint()

    def mousePressEvent(self, e):
        &quot;&quot;&quot;
        mouse press events for the widget
        :param e: QMouseEvent
        :return:
        &quot;&quot;&quot;
        if e.button() == Qt.LeftButton:
            self.left_click = True
            self.start_pos = e.pos()

    def mouseReleaseEvent(self, e):
        &quot;&quot;&quot;
        mouse release events for the widget
        :param e: QMouseEvent
        :return:
        &quot;&quot;&quot;
        if e.button() == Qt.LeftButton:
            self.left_click = False

class Ui_Form(QWidget):
    def setupUi(self, Form):
        Form.setObjectName(&quot;Form&quot;)
        Form.resize(1020, 726)
        self.scrollArea = QtWidgets.QScrollArea(Form)
        self.scrollArea.setGeometry(QtCore.QRect(240, 50, 719, 309))
        self.scrollArea.setWidgetResizable(True)
        self.scrollArea.setObjectName(&quot;scrollArea&quot;)
        self.scrollAreaWidgetContents = QtWidgets.QWidget()
        self.box = ImageBox()
        self.scrollAreaWidgetContents.setGeometry(QtCore.QRect(0, 0, self.box.width(), self.box.height()))
        self.scrollAreaWidgetContents.setMinimumSize(QtCore.QSize(719, 309))
        self.scrollAreaWidgetContents.setObjectName(&quot;scrollAreaWidgetContents&quot;)
        self.gridLayout = QtWidgets.QGridLayout(self.scrollAreaWidgetContents)
        self.gridLayout.setObjectName(&quot;gridLayout&quot;)

        self.gridLayout.addWidget(self.box, 0, 0, 1, 1)
        self.scrollArea.setWidget(self.scrollAreaWidgetContents)
        self.open_file = QtWidgets.QPushButton(Form)
        self.open_file.setGeometry(QtCore.QRect(30, 100, 81, 41))
        font = QtGui.QFont()
        font.setFamily(&quot;Aharoni&quot;)
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.open_file.setFont(font)
        self.open_file.setObjectName(&quot;open_file&quot;)
        self.open_file.clicked.connect(self.open_image)
        self.progressBar = QtWidgets.QProgressBar(Form)
        self.progressBar.setGeometry(QtCore.QRect(240, 370, 751, 23))
        self.progressBar.setProperty(&quot;value&quot;, 24)
        self.progressBar.setObjectName(&quot;progressBar&quot;)
        self.line = QtWidgets.QFrame(Form)
        self.line.setGeometry(QtCore.QRect(50, 410, 911, 16))
        self.line.setFrameShape(QtWidgets.QFrame.HLine)
        self.line.setFrameShadow(QtWidgets.QFrame.Sunken)
        self.line.setObjectName(&quot;line&quot;)
        self.start_check = QtWidgets.QPushButton(Form)
        self.start_check.setGeometry(QtCore.QRect(130, 100, 81, 41))
        font = QtGui.QFont()
        font.setFamily(&quot;Aharoni&quot;)
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.start_check.setFont(font)
        self.start_check.setObjectName(&quot;start_check&quot;)
        self.label = QtWidgets.QLabel(Form)
        self.label.setGeometry(QtCore.QRect(40, 170, 61, 31))
        font = QtGui.QFont()
        font.setFamily(&quot;Aharoni&quot;)
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.label.setFont(font)
        self.label.setObjectName(&quot;label&quot;)
        self.label_2 = QtWidgets.QLabel(Form)
        self.label_2.setGeometry(QtCore.QRect(40, 300, 61, 31))
        font = QtGui.QFont()
        font.setFamily(&quot;Aharoni&quot;)
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.label_2.setFont(font)
        self.label_2.setObjectName(&quot;label_2&quot;)


        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

    def retranslateUi(self, Form):
        _translate = QtCore.QCoreApplication.translate
        Form.setWindowTitle(_translate(&quot;Form&quot;, &quot;Form&quot;))
        self.open_file.setText(_translate(&quot;Form&quot;, &quot;选择文件&quot;))
        self.start_check.setText(_translate(&quot;Form&quot;, &quot;开始检测&quot;))
        self.label.setText(_translate(&quot;Form&quot;, &quot;文件名称：&quot;))
        self.label_2.setText(_translate(&quot;Form&quot;, &quot;检测状态:&quot;))

    def open_image(self):
        &quot;&quot;&quot;
        select image file and open it
        :return:
        &quot;&quot;&quot;
        # img_name, _ = QFileDialog.getOpenFileName(self, &quot;打开图片&quot;, &quot;&quot;, &quot;All Files(*);;*.jpg;;*.png&quot;)
        img_name, _ = QFileDialog.getOpenFileName(None, &quot;Open Image File&quot;,&quot;&quot;,&quot;All Files(*);;*.jpg;;*.png;;*.jpeg&quot;)
        img = QPixmap(img_name)
        print(img.width(),&quot;+&quot;,img.height())
        self.scrollAreaWidgetContents.setGeometry(QtCore.QRect(0, 0, img.width(), img.height()))
        self.box.set_image(img_name)

if __name__ == &quot;__main__&quot;:
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = Ui_Form()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())
</code></pre>
<h1 id="版本三"><a href="#版本三" class="headerlink" title="版本三"></a>版本三</h1><p><a target="_blank" rel="noopener" href="https://huaweicloud.csdn.net/63808365dacf622b8df894dc.html">https://huaweicloud.csdn.net/63808365dacf622b8df894dc.html</a></p>
<pre><code># -*- coding: utf-8 -*-
import sys
from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtGui import QImageReader
from PyQt5.QtWidgets import QWidget, QApplication, QVBoxLayout, QHBoxLayout, QPushButton, QLabel, QFileDialog
from PyQt5.Qt import QPixmap, QPoint, Qt, QPainter, QIcon
from PyQt5.QtCore import QSize


class ImageBox(QWidget):
    def __init__(self):
        super(ImageBox, self).__init__()
        self.img = None
        self.scaled_img = None
        self.start_pos = None
        self.end_pos = None
        self.left_click = False
        self.wheel_flag = False

        self.scale = 1
        self.old_scale = 1
        self.point = QPoint(0, 0)
        self.x = -1
        self.y = -1
        self.new_height = -1
        self.new_width = -1

    def init_ui(self):
        self.setWindowTitle(&quot;ImageBox&quot;)

    def set_image(self, img_path):
        self.img = QPixmap(img_path)
        width, height = self.img.width(), self.img.height()
        if height / width &gt; 990 / 660:
            new_height = 990
            new_width = width * 990 / height
        else:
            new_height = height * 660 / width
            new_width = 660
        self.point = QPoint(int((660 - new_width) * 0.5), int((990 - new_height) * 0.5))
        self.img = self.img.scaled(new_width, new_height, Qt.KeepAspectRatio)
        self.scaled_img = self.img

        self.new_height = new_height
        self.new_width = new_width
        self.scale = 1

    def paintEvent(self, e):
        if self.scaled_img:
            painter = QPainter()
            painter.begin(self)
            painter.scale(self.scale, self.scale)
            if self.wheel_flag:        # 定点缩放
                self.wheel_flag = False
                # 判断当前鼠标pos在不在图上
                this_left_x = self.point.x() * self.old_scale
                this_left_y = self.point.y() * self.old_scale
                this_scale_width = self.new_width * self.old_scale
                this_scale_height = self.new_height * self.old_scale

                # 鼠标点在图上，以鼠标点为中心动作
                gap_x = self.x - this_left_x
                gap_y = self.y - this_left_y
                if 0 &lt; gap_x &lt; this_scale_width and 0 &lt; gap_y &lt; this_scale_height:
                    new_left_x = int(self.x / self.scale - gap_x / self.old_scale)
                    new_left_y = int(self.y / self.scale - gap_y / self.old_scale)
                    self.point = QPoint(new_left_x, new_left_y)
                # 鼠标点不在图上，固定左上角进行缩放
                else:
                    true_left_x = int(self.point.x() * self.old_scale / self.scale)
                    true_left_y = int(self.point.y() * self.old_scale / self.scale)
                    self.point = QPoint(true_left_x, true_left_y)
            painter.drawPixmap(self.point, self.scaled_img)  # 此函数中还会用scale对point进行处理
            painter.end()

    def wheelEvent(self, event):
        angle = event.angleDelta() / 8  # 返回QPoint对象，为滚轮转过的数值，单位为1/8度
        angleY = angle.y()
        self.old_scale = self.scale
        self.x, self.y = event.x(), event.y()
        self.wheel_flag = True
        # 获取当前鼠标相对于view的位置
        if angleY &gt; 0:
            self.scale *= 1.08
        else:  # 滚轮下滚
            self.scale *= 0.92
        if self.scale &lt; 0.3:
            self.scale = 0.3
        self.adjustSize()
        self.update()

    def mouseMoveEvent(self, e):
        if self.left_click:
            self.end_pos = e.pos() - self.start_pos                    # 当前位置-起始位置=差值
            self.point = self.point + self.end_pos / self.scale        # 左上角的距离变化
            self.start_pos = e.pos()
            self.repaint()

    def mousePressEvent(self, e):
        if e.button() == Qt.LeftButton:
            self.left_click = True
            self.start_pos = e.pos()

    def mouseReleaseEvent(self, e):
        if e.button() == Qt.LeftButton:
            self.left_click = False


class Ui_Form(QWidget):
    def setupUi(self, Form):
        Form.setObjectName(&quot;Form&quot;)
        Form.resize(900, 1080)
        self.scrollArea = QtWidgets.QScrollArea(Form)
        self.scrollArea.setGeometry(QtCore.QRect(150, 10, 680, 990))
        self.scrollArea.setHorizontalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
        self.scrollArea.setVerticalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
        # self.scrollArea.setWidgetResizable(True)
        self.scrollArea.setObjectName(&quot;scrollArea&quot;)

        self.scrollAreaWidgetContents = QtWidgets.QWidget()
        self.box = ImageBox()

        self.scrollAreaWidgetContents.setGeometry(QtCore.QRect(0, 0, 680, 990))
        self.scrollAreaWidgetContents.setMinimumSize(QtCore.QSize(100, 100))
        self.scrollAreaWidgetContents.setObjectName(&quot;scrollAreaWidgetContents&quot;)
        self.gridLayout = QtWidgets.QGridLayout(self.scrollAreaWidgetContents)
        self.gridLayout.setObjectName(&quot;gridLayout&quot;)

        self.gridLayout.addWidget(self.box, 0, 0, 1, 1)
        self.scrollArea.setWidget(self.scrollAreaWidgetContents)

        self.open_file = QtWidgets.QPushButton(Form)
        self.open_file.setGeometry(QtCore.QRect(30, 100, 81, 41))
        font = QtGui.QFont()
        font.setFamily(&quot;Aharoni&quot;)
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.open_file.setFont(font)
        self.open_file.setObjectName(&quot;open_file&quot;)
        self.open_file.clicked.connect(self.open_image)

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

    def retranslateUi(self, Form):
        _translate = QtCore.QCoreApplication.translate
        Form.setWindowTitle(_translate(&quot;Form&quot;, &quot;Form&quot;))
        self.open_file.setText(_translate(&quot;Form&quot;, &quot;选择文件&quot;))

    def open_image(self):
        img_name, _ = QFileDialog.getOpenFileName(None, &quot;Open Image File&quot;,&quot;&quot;,&quot;All Files(*);;*.jpg;;*.png;;*.jpeg&quot;)
        self.box.set_image(img_name)


if __name__ == &quot;__main__&quot;:
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = Ui_Form()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())
</code></pre>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-QSS美化控件教程"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/10/25/QSS%E7%BE%8E%E5%8C%96%E6%8E%A7%E4%BB%B6%E6%95%99%E7%A8%8B/"
    >QSS美化控件教程</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/10/25/QSS%E7%BE%8E%E5%8C%96%E6%8E%A7%E4%BB%B6%E6%95%99%E7%A8%8B/" class="article-date">
  <time datetime="2023-10-25T02:25:00.000Z" itemprop="datePublished">2023-10-25</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>在使用Qt开发界面程序时，常用控件的美化是一件繁琐的事情，收藏一些基本控件的美化样式，可以在项目开发时节省大量时间，本篇文章由此而出，收集常用的控件美化样式。<br>以下qss代码是直接在Qt Designer设计界面中样式表中添加或者使用QFile读取qss代码进行修改控件样式。</p>
<h1 id="1、QPushButton美化"><a href="#1、QPushButton美化" class="headerlink" title="1、QPushButton美化"></a>1、QPushButton美化</h1><pre><code>QWidget#Widget&#123;
background-color:#fff;
&#125;

QPushButton&#123;
border:5px solid #fff;
border-radius:8px;
padding:1px 5px;
min-width:120px;
min-height:35px;
&#125;

QPushButton#first_btn&#123;
color:#fff;
background-color:#0d6efd;
&#125;
#first_btn:hover&#123;
background-color:#0055ff;
&#125;
#first_btn:pressed&#123;
border: 4px solid #98c1fe;
&#125;

QPushButton#second_btn&#123;
color:#fff;
background-color:#6c757d;
&#125;

#second_btn:hover&#123;
background-color:#5c636a;
&#125;
#second_btn:pressed&#123;
border:4px solid #c0c4c8;
&#125;

QPushButton#third_btn&#123;
color:#fff;
background-color:#198754;
&#125;
#third_btn:hover&#123;
background-color:#157347;
&#125;
#third_btn:pressed&#123;
border:4px solid #9dccb6;
&#125;

QPushButton#four_btn&#123;
color:#fff;
background-color:#dc3545;
&#125;
#four_btn:hover&#123;
background-color:#bb2d3b;
&#125;
#four_btn:pressed&#123;
border:4px solid #f0a9b0;
&#125;
QPushButton#five_btn&#123;
color:#000;
background-color:#ffc107;
&#125;
#five_btn:hover&#123;
background-color:#ffca2c;
&#125;
#five_btn:pressed&#123;
border:5px solid #ecd182;
&#125;
QPushButton#six_btn&#123;
color:#000;
background-color:#0dcaf0;
&#125;
#six_btn:hover&#123;
background-color:#31d2f2;
&#125;
#six_btn:pressed&#123;
border:54x solid #85d5e5;
&#125;
QPushButton#seven_btn&#123;
color:#000;
background-color:#f8f9fa;
&#125;
#seven_btn:hover&#123;
background-color:#f9fafb;
&#125;
#seven_btn:pressed&#123;
border:4px solid #e9e9ea;
&#125;
QPushButton#eight_btn&#123;
color:#fff;
background-color:#212529;
&#125;
#eight_btn:hover&#123;
background-color:#1c1f23;
&#125;
#eight_btn:pressed&#123;
border:4px solid #a0a2a4;
&#125;
QPushButton#nine_btn&#123;
color:#fff;
background-color:#d235d2;
&#125;
#nine_btn:hover&#123;
background-color:#a600a6;
&#125;
#nine_btn:pressed&#123;
border:4px solid #d25fd2;
&#125;
</code></pre>
<h1 id="2、QComboBox美化"><a href="#2、QComboBox美化" class="headerlink" title="2、QComboBox美化"></a>2、QComboBox美化</h1><pre><code>#cbx&#123;
border:1px #ced4da;
border-radius:4px;
padding-left:10px;
&#125;
#cbx::drop-down&#123;
border:0px;
&#125;

#cbx::down-arrow&#123;
    border-image: url(:/icons/down.png);
    width:20px;
    height:20px;
    margin-right:20px;
&#125;
#cbx:on&#123;
border:4px solid #c2dbfe;
&#125;
#cbx QListView&#123;
font-size:16px;
border:1px solid rgba(0,0,0,10%);
padding:5px;
background-color:#fff;
outline:0px;
&#125;
#cbx QListView::item&#123;
padding-left:10px;
background-color:#fff;
&#125;
#cbx QListView::item:hover&#123;
background-color:#1e90ff;
&#125;
#cbx QListView::item:selected&#123;
background-color:#1e90ff;
&#125;
</code></pre>
<h1 id="3、QLineEdit美化"><a href="#3、QLineEdit美化" class="headerlink" title="3、QLineEdit美化"></a>3、QLineEdit美化</h1><pre><code>QLineEdit&#123;
color:#fff;
border:2px solid rgb(37,39,48);
border-radius:20px;
padding-left:20px;
padding-right:20px;
background-color:rgb(34,36,44);
&#125;
QLineEdit:hover&#123;
border:4px solid rgb(48,50,62);
&#125;
QLineEdit:focus&#123;
border:4px solid rgb(85,170,255);
background-color:rgb(43,45,56);
&#125;
#Widget&#123;
background-color:rgb(37,39,48);
&#125;
</code></pre>
<p>————————————————<br>版权声明：本文为CSDN博主「神威难藏泪~」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/Thinking777/article/details/130374425">https://blog.csdn.net/Thinking777/article/details/130374425</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Python强制替换文件"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/10/24/Python%E5%BC%BA%E5%88%B6%E6%9B%BF%E6%8D%A2%E6%96%87%E4%BB%B6/"
    >Python强制替换文件</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/10/24/Python%E5%BC%BA%E5%88%B6%E6%9B%BF%E6%8D%A2%E6%96%87%E4%BB%B6/" class="article-date">
  <time datetime="2023-10-24T02:24:00.000Z" itemprop="datePublished">2023-10-24</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>1、检查文件是否存在</p>
<p>首先，我们需要检查待替换的文件是否存在。如果文件存在，我们将执行替换操作；如果文件不存在，我们需要进行相应的处理逻辑，比如抛出异常或创建新文件。</p>
<pre><code>import os

file_path = &#39;/path/to/source/file.txt&#39;

if os.path.exists(file_path):
    # 文件存在的处理逻辑
    pass
else:
    # 文件不存在的处理逻辑
    pass
</code></pre>
<p>2、备份现有文件<br>接下来，我们需要备份原文件，以便在替换之后可以恢复。</p>
<pre><code>import shutil

source_file_path = &#39;/path/to/source/file.txt&#39;
backup_file_path = &#39;/path/to/backup/file.txt&#39;

shutil.copyfile(source_file_path, backup_file_path)
</code></pre>
<p>3、替换文件</p>
<p>现在，我们可以将新文件替换原文件。</p>
<pre><code>import shutil

new_file_path = &#39;/path/to/new/file.txt&#39;
source_file_path = &#39;/path/to/source/file.txt&#39;

shutil.copyfile(new_file_path, source_file_path)
</code></pre>
<p>4、恢复备份</p>
<p>如果在替换文件后遇到问题，我们可以使用备份文件恢复原文件。</p>
<pre><code>import shutil

backup_file_path = &#39;/path/to/backup/file.txt&#39;
source_file_path = &#39;/path/to/source/file.txt&#39;

shutil.copyfile(backup_file_path, source_file_path)
</code></pre>
<hr>
<p>©著作权归作者所有：来自51CTO博客作者mob64ca12eab427的原创作品，请联系作者获取转载授权，否则将追究法律责任<br>python 强制替换文件<br><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_16213408/7158206">https://blog.51cto.com/u_16213408/7158206</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-PyQt5密码输入框"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/10/23/PyQt5%E5%AF%86%E7%A0%81%E8%BE%93%E5%85%A5%E6%A1%86/"
    >PyQt5密码输入框</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/10/23/PyQt5%E5%AF%86%E7%A0%81%E8%BE%93%E5%85%A5%E6%A1%86/" class="article-date">
  <time datetime="2023-10-23T02:23:00.000Z" itemprop="datePublished">2023-10-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>大栗子<br>实现了三种密码输入框的方式：<br>1.输入的密码不可见；<br>2.输入的密码可见，但是鼠标点击其他控件后，密码不可见；<br>3.输入的密码不可见，同时为了更加的安全，屏蔽了鼠标右键、禁用复制、粘贴快捷键、鼠标在密码框中不可移动，不可全选。就类似我们在输入QQ密码的时候一样。</p>
<p>PasswdDialog.py</p>
<pre><code>&#39;&#39;&#39;
其实大家从这段代码中我们可以看出，本质上就是QDialog的继承，加上自己希望的界面和实现的功能。因此QDialog所有的属性，我们自定义对话框PasswdDialog都会有，这样能够省掉我们不少的时间来。这个也就是面向对象编程的魅力所在了。
&#39;&#39;&#39;
# coding=utf-8
from PyQt5.QtWidgets import QDialog, QApplication, QLineEdit, QLabel, QPushButton, QHBoxLayout, QVBoxLayout, QMessageBox
from PyQt5.QtCore import Qt, QEvent, QRegExp, QObject
from PyQt5.QtGui import QKeyEvent, QKeySequence, QRegExpValidator


class PasswdDialog(QDialog):
    def __init__(self):
        super().__init__()
        self.initUI()

    def initUI(self):
        self.resize(350, 100)
        self.setWindowTitle(&quot;密码输入框&quot;)

        self.lb = QLabel(&quot;请输入密码：&quot;, self)

        self.edit = QLineEdit(self)
        self.edit.installEventFilter(self)

        self.bt1 = QPushButton(&quot;确定&quot;, self)
        self.bt2 = QPushButton(&quot;取消&quot;, self)

        hbox = QHBoxLayout()
        hbox.addStretch(1)
        hbox.addWidget(self.bt1)
        hbox.addStretch(1)
        hbox.addWidget(self.bt2)
        hbox.addStretch(1)

        vbox = QVBoxLayout()
        vbox.addWidget(self.lb)
        vbox.addWidget(self.edit)
        vbox.addStretch(1)
        vbox.addLayout(hbox)

        self.setLayout(vbox)

        &#39;&#39;&#39;
        这个三个语句是给密码输入框增加一些属性
        &#39;&#39;&#39;
        self.edit.setContextMenuPolicy(Qt.NoContextMenu)  # 这个语句设置QLineEdit对象的上下文菜单的策略。复制，粘贴，。。。，是否可用
        self.edit.setPlaceholderText(
            &quot;密码不超15位，只能有数字和字母，必须以字母开头&quot;)  # 只要行编辑为空，设置此属性将使行编辑显示为灰色的占位符文本。默认情况下，此属性包含一个空字符串。这是非常好的使用方法，可以在用户输入密码前看到一些小提示信息，但是又不影响使用，非常棒这个方法。
        self.edit.setEchoMode(QLineEdit.Password)  # 这条语句设置了如何限定输入框中显示其包含信息的方式，这里设置的是：密码方式，即输入的时候呈现出原点出来。

        &#39;&#39;&#39;
        这三段代码大体意思就是说，运用正则表达式限定密码输入框字符接收的条件：
        长度不能超过15位；
        字母开头；
        后面跟着的字符只能是字母或者数字。
        &#39;&#39;&#39;
        regx = QRegExp(&quot;^[a-zA-Z][0-9A-Za-z]&#123;14&#125;$&quot;)  # 为给定的模式字符串构造一个正则表达式对象。
        validator = QRegExpValidator(regx,
                                     self.edit)  # 构造一个验证器，该父对象接受与正则表达式匹配的所有字符串。这里的父对象就是QLineEdit对象了。匹配是针对整个字符串; 例如：如果正则表达式是[A-Fa-f0-9]+将被视为^[A-Fa-f0-9]+$。
        self.edit.setValidator(validator)  # 将密码输入框设置为仅接受符合验证器条件的输入。 这允许您对可能输入的文本设置任何约束条件。因此我们这里设置的就是符合上面描述的三种约束条件。

        self.bt1.clicked.connect(self.Ok)
        self.bt2.clicked.connect(self.Cancel)

        object = QObject()

        &#39;&#39;&#39;
        事件过滤器可是一个非常重要的概念。根据Qt的官方文档，如果对象被安装已监视对象的事件过滤器，则过滤事件。如果要过滤事件，需重新实现此函数时，若停止进一步处理，返回true； 否则返回false。
        如果一个对象安装多个事件过滤器，那么，最后安装的过滤器首先被激活。    
        &#39;&#39;&#39;

    def eventFilter(self, object, event):
        if object == self.edit:  # 这里是对事件的判断。其中QKeyEvent类描述了一个关键事件。当按下或释放按键时，主要事件将发送到具有键盘输入焦点的小部件。然后运用matches方法匹配具体的按键。
            if event.type() == QEvent.MouseMove or event.type() == QEvent.MouseButtonDblClick:
                return True
            elif event.type() == QEvent.KeyPress:
                key = QKeyEvent(event)
                if key.matches(QKeySequence.SelectAll) or key.matches(QKeySequence.Copy) or key.matches(
                        QKeySequence.Paste):  # 然后进行事件判断与转换：鼠标移动对应的事件类型为QEvent.MouseMove，鼠标双击对应的事件类型为QEvent.MouseButtonDblClick，全选、复制、粘贴对应的事件类型为 QEvent.KeyPress，当接收到这些事件时，需要被过滤掉，所以返回true。
                    return True
        return QDialog.eventFilter(self, object, event)  # 继续传递该事件到被观察者，由其本身调用相应的事件

    def Ok(self):
        self.text = self.edit.text()
        if len(self.text) == 0:
            QMessageBox.warning(self, &quot;警告&quot;, &quot;密码为空&quot;)
        elif len(self.text) &lt; 6:
            QMessageBox.warning(self, &quot;警告&quot;, &quot;密码长度低于6位&quot;)
        else:
            self.done(1)  # 结束对话框返回1

    def Cancel(self):
        self.done(0)  # 结束对话框返回0
</code></pre>
<p>main.py</p>
<pre><code># coding=utf-8

from PyQt5.QtWidgets import (QApplication, QWidget, QPushButton, QLabel, QInputDialog, QTextBrowser, QLineEdit)
from PasswdDialog import PasswdDialog
import sys


class Example(QWidget):
    def __init__(self):
        super().__init__()
        self.initUI()

    def initUI(self):
        self.resize(380, 180)
        self.setWindowTitle(&#39;早点毕业吧--自定义密码输入对话框&#39;)

        self.lb1 = QLabel(&#39;密码在此显示...&#39;, self)
        self.lb1.move(20, 20)

        self.bt1 = QPushButton(&#39;输入密码(普通型)&#39;, self)
        self.bt1.move(20, 60)

        self.bt2 = QPushButton(&#39;输入密码(普通加强型)&#39;, self)
        self.bt2.move(20, 100)

        self.bt3 = QPushButton(&#39;输入密码(特别加强型)&#39;, self)
        self.bt3.move(20, 140)

        self.show()

        self.bt1.clicked.connect(self.showDialog)
        self.bt2.clicked.connect(self.showDialog)
        self.bt3.clicked.connect(self.showDialog)

    def showDialog(self):
        sender = self.sender()
        if sender == self.bt1:
            text, ok = QInputDialog.getText(self, &#39;密码输入框&#39;, &#39;请输入密码：&#39;, QLineEdit.Password)
            if ok:
                self.lb1.setText(text)
        elif sender == self.bt2:
            text, ok = QInputDialog.getText(self, &#39;密码输入框&#39;, &#39;请输入密码：&#39;, QLineEdit.PasswordEchoOnEdit)
            if ok:
                self.lb1.setText(text)
        else:
            pwd = PasswdDialog()
            r = pwd.exec_()
            if r:
                self.lb1.setText(pwd.text)


if __name__ == &#39;__main__&#39;:
    app = QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())
</code></pre>
<p>具体运行结果参考：<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/30152208">https://zhuanlan.zhihu.com/p/30152208</a><br>谢谢 “学点编程吧”<br>————————————————<br>版权声明：本文为CSDN博主「十三吖」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40006058/article/details/80076669">https://blog.csdn.net/qq_40006058/article/details/80076669</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/7/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/57/">57</a><a class="extend next" rel="next" href="/page/9/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2022-2024
        <i class="ri-heart-fill heart_icon"></i> paladin1893
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="帕拉丁的游鱼"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>