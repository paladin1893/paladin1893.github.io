<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
       
      <meta name="keywords" content="RS,GPS,GIS,QGIS,Opticks,QT,OpenCV,OSG" />
       
      <meta name="description" content="地理信息系统，遥感科学，卫星导航定位技术综合研究。" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> 帕拉丁的游鱼</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="帕拉丁的游鱼" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">帕拉丁的游鱼</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-vue正则验证（二）"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/03/11/vue%E6%AD%A3%E5%88%99%E9%AA%8C%E8%AF%81%EF%BC%88%E4%BA%8C%EF%BC%89/"
    >vue正则验证（二）</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/03/11/vue%E6%AD%A3%E5%88%99%E9%AA%8C%E8%AF%81%EF%BC%88%E4%BA%8C%EF%BC%89/" class="article-date">
  <time datetime="2023-03-11T11:23:36.000Z" itemprop="datePublished">2023-03-11</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>验证数字的正则表达式集</p>
<pre><code>验证数字：^[0-9]*$
验证n位的数字：^\d&#123;n&#125;$
验证至少n位数字：^\d&#123;n,&#125;$
验证m-n位的数字：^\d&#123;m,n&#125;$
验证零和非零开头的数字：^(0|[1-9][0-9]*)$
验证有两位小数的正实数：^[0-9]+(.[0-9]&#123;2&#125;)?$
验证有1-3位小数的正实数：^[0-9]+(.[0-9]&#123;1,3&#125;)?$
验证非零的正整数：^\+?[1-9][0-9]*$
验证非零的负整数：^\-[1-9][0-9]*$
验证非负整数（正整数 + 0） ^\d+$
验证非正整数（负整数 + 0） ^((-\d+)|(0+))$
验证长度为3的字符：^.&#123;3&#125;$
验证由26个英文字母组成的字符串：^[A-Za-z]+$
验证由26个大写英文字母组成的字符串：^[A-Z]+$
验证由26个小写英文字母组成的字符串：^[a-z]+$
验证由数字和26个英文字母组成的字符串：^[A-Za-z0-9]+$
验证由数字、26个英文字母或者下划线组成的字符串：^\w+$
验证用户密码:^[a-zA-Z]\w&#123;5,17&#125;$ 正确格式为：以字母开头，长度在6-18之间，只能包含字符、数字和下划线。
验证是否含有 ^%&amp;&#39;,;=?$\&quot; 等字符：[^%&amp;&#39;,;=?$\x22]+
验证汉字：^[\u4e00-\u9fa5],&#123;0,&#125;$
验证Email地址：^\w+[-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$
验证InternetURL：^http://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$ ；^[a-zA-z]+://(w+(-w+)*)(.(w+(-w+)*))*(?S*)?$
验证电话号码：^(\(\d&#123;3,4&#125;\)|\d&#123;3,4&#125;-)?\d&#123;7,8&#125;$：--正确格式为：XXXX-XXXXXXX，XXXX-XXXXXXXX，XXX-XXXXXXX，XXX-XXXXXXXX，XXXXXXX，XXXXXXXX。
验证身份证号（15位或18位数字）：^\d&#123;15&#125;|\d&#123;&#125;18$
验证一年的12个月：^(0?[1-9]|1[0-2])$ 正确格式为：“01”-“09”和“1”“12”
验证一个月的31天：^((0?[1-9])|((1|2)[0-9])|30|31)$ 正确格式为：01、09和1、31。
整数：^-?\d+$
非负浮点数（正浮点数 + 0）：^\d+(\.\d+)?$
正浮点数 ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$
非正浮点数（负浮点数 + 0） ^((-\d+(\.\d+)?)|(0+(\.0+)?))$
负浮点数 ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$
浮点数 ^(-?\d+)(\.\d+)?$
</code></pre>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">正则表达式</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" rel="tag">软件开发</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-vue正则验证（一）"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/03/10/vue%E6%AD%A3%E5%88%99%E9%AA%8C%E8%AF%81%EF%BC%88%E4%B8%80%EF%BC%89/"
    >vue正则验证（一）</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/03/10/vue%E6%AD%A3%E5%88%99%E9%AA%8C%E8%AF%81%EF%BC%88%E4%B8%80%EF%BC%89/" class="article-date">
  <time datetime="2023-03-10T11:20:45.000Z" itemprop="datePublished">2023-03-10</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>vue的常用数据验证规则：</p>
<pre><code>1. 手机号：
    var validateMobilePhone = (rule, value, callback) =&gt; &#123;
            if (value === &#39;&#39;) &#123;
              callback(new Error(&#39;手机号不可为空&#39;));
            &#125; else &#123;
              if (value !== &#39;&#39;) &#123; 
                var reg=/^1[3456789]\d&#123;9&#125;$/;
                if(!reg.test(value))&#123;
                  callback(new Error(&#39;请输入有效的手机号码&#39;));
                &#125;
              &#125;
              callback();
            &#125;
          &#125;;
2. 邮箱：
    var validateEmail = (rule, value, callback) =&gt; &#123;
            if (value === &#39;&#39;) &#123;
              callback(new Error(&#39;请正确填写邮箱&#39;));
            &#125; else &#123;
              if (value !== &#39;&#39;) &#123; 
                var reg=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;
                if(!reg.test(value))&#123;
                  callback(new Error(&#39;请输入有效的邮箱&#39;));
                &#125;
              &#125;
              callback();
            &#125;
          &#125;;
3. 密码：
    var validatePass = (rule, value, callback) =&gt; &#123;
            if (value === &#39;&#39;) &#123;
              callback(new Error(&#39;密码格式不正确&#39;));
            &#125; else if(value.length &lt; 6)&#123;
              callback(new Error(&#39;密码长度最小6位&#39;));
            &#125;else&#123;
              callback();
            &#125;
          &#125;;
4. 固定电话：
    var validatePhone = (rule, value, callback) =&gt; &#123;
            if (value === &#39;&#39;) &#123;
              callback(new Error(&#39;电话不可为空&#39;));
            &#125; else &#123;
              if (value !== &#39;&#39;) &#123; 
                var reg =/^((0\d&#123;2,3&#125;-\d&#123;7,8&#125;)|(1[3584]\d&#123;9&#125;))$/;
                if(!reg.test(value))&#123;
                  callback(new Error(&#39;请输入正确的座机号格式为：0000-0000000&#39;));
                &#125;
              &#125;
              callback();
            &#125;
          &#125;;
5. 微信号：
    var validateWeixin = (rule, value, callback) =&gt; &#123;
            if (value === &#39;&#39;) &#123;
              callback(new Error(&#39;微信号不能为空&#39;));
            &#125;else&#123;
              var reg= /^[a-zA-Z][a-zA-Z0-9_-]&#123;5,19&#125;$/;
              if(!reg.test(value))&#123;
                callback(new Error(&#39;请输入正确的微信号码&#39;));
              &#125;else&#123;
                callback();
              &#125;
            &#125; 
          &#125;;
6. IP地址：
     var validateIP(rule, value, callback) &#123;
        if(value &amp;&amp; &quot;...&quot; === value)&#123;
            callback(new Error(&#39;请输入IP地址&#39;))
        &#125;if (value &amp;&amp; !(/((25[0-5]|2[0-4]\d|((1\d&#123;2&#125;)|([1-9]?\d)))\.)&#123;3&#125;(25[0-5]|2[0-4]\d|((1\d&#123;2&#125;)|([1-9]?\d)))/).test(value)) &#123;
          callback(new Error(&#39;IP地址不规范&#39;))
        &#125; else &#123;
          callback()
        &#125;
      &#125;
7. 身份证号：
    var  validateIDCard(rule, value, callback) &#123;
        if (value &amp;&amp; (!(/\d&#123;17&#125;[\d|x]|\d&#123;15&#125;/).test(value) || (value.length !== 15 &amp;&amp; value.length !== 18))) &#123;
          callback(new Error(&#39;身份证号码不规范&#39;))
        &#125; else &#123;
          callback()
        &#125;
      &#125;
8. 正整数：
    var validateIntegerP(rule, value, callback) &#123;
        if (value &amp;&amp; !(/^[1-9]\d*$/).test(value)) &#123;
          callback(new Error(&#39;只能填写正整数&#39;))
        &#125; else &#123;
          callback()
        &#125;
      &#125;
    //负整数 /^-[1-9]\d*$/
9. 电脑MAC地址：
     var validateMac (rule, value, callback) &#123;
        let temp = /[A-Fa-f0-9]&#123;2&#125;-[A-Fa-f0-9]&#123;2&#125;-[A-Fa-f0-9]&#123;2&#125;-[A-Fa-f0-9]&#123;2&#125;-[A-Fa-f0-9]    &#123;2&#125;-[A-Fa-f0-9]&#123;2&#125;/;
        if (!temp.test(value)) &#123;
          callback(new Error(&#39;请输入xx-xx-xx-xx-xx-xx形式的MAC地址！&#39;));
        &#125; else&#123;
          callback();
        &#125;
      &#125;
</code></pre>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VUE/" rel="tag">VUE</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">正则表达式</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-跨域处理"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/03/09/%E8%B7%A8%E5%9F%9F%E5%A4%84%E7%90%86/"
    >跨域处理</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/03/09/%E8%B7%A8%E5%9F%9F%E5%A4%84%E7%90%86/" class="article-date">
  <time datetime="2023-03-09T15:42:59.000Z" itemprop="datePublished">2023-03-09</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>注意事项：</p>
<ul>
<li>import org.springframework.web.filter.CorsFilter;</li>
<li>configuration.addAllowedOriginPattern(“*”);</li>
</ul>
<p>示例代码：</p>
<pre><code>package com.energy.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.UrlBasedCorsConfigurationSource;
import org.springframework.web.filter.CorsFilter;

@Configuration
public class MyCorsConfig &#123;

//    @Bean
//    public CorsFilter corsFilter()&#123;
//        CorsConfiguration configuration = new CorsConfiguration();
//        configuration.addAllowedOriginPattern(&quot;*&quot;);
//        configuration.setAllowCredentials(true);
//        configuration.addAllowedMethod(&quot;*&quot;);
//        configuration.addAllowedHeader(&quot;*&quot;);
//
//        UrlBasedCorsConfigurationSource urlBasedCorsConfigurationSource = new UrlBasedCorsConfigurationSource();
//        urlBasedCorsConfigurationSource.registerCorsConfiguration(&quot;/**&quot;,configuration);
//
//        return  new CorsFilter(urlBasedCorsConfigurationSource);
//    &#125;

//-------------------------------------------------------------

//    private CorsConfiguration buildConfig() &#123;
//        CorsConfiguration corsConfiguration = new CorsConfiguration();
//        corsConfiguration.addAllowedOriginPattern(&quot;*&quot;); // 允许任何域名使用
//        corsConfiguration.addAllowedHeader(&quot;*&quot;); // 允许任何头
//        corsConfiguration.addAllowedMethod(&quot;*&quot;); // 允许任何方法（post、get等）
//        corsConfiguration.setAllowCredentials(true);
//        return corsConfiguration;
//    &#125;
//
//    @Bean
//    public CorsFilter corsFilter() &#123;
//        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
//        source.registerCorsConfiguration(&quot;/**&quot;, buildConfig());
//        return new CorsFilter(source);
//    &#125;

//-------------------------------------------------------------

    @Bean
    public CorsFilter corsFilter() &#123;
        final UrlBasedCorsConfigurationSource urlBasedCorsConfigurationSource = new UrlBasedCorsConfigurationSource();
        final CorsConfiguration corsConfiguration = new CorsConfiguration();
        /*是否允许请求带有验证信息*/
        corsConfiguration.setAllowCredentials(true);
        /*允许访问的客户端域名*/
        corsConfiguration.addAllowedOriginPattern(&quot;*&quot;);
        /*允许服务端访问的客户端请求头*/
        corsConfiguration.addAllowedHeader(&quot;*&quot;);
        /*允许访问的方法名,GET POST等*/
        corsConfiguration.addAllowedMethod(&quot;*&quot;);
        urlBasedCorsConfigurationSource.registerCorsConfiguration(&quot;/**&quot;, corsConfiguration);
        return new CorsFilter(urlBasedCorsConfigurationSource);
    &#125;

&#125;
</code></pre>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%B7%A8%E5%9F%9F%E5%A4%84%E7%90%86/" rel="tag">跨域处理</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Springboot-Postgresql-FastAutoGenerator-2"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/03/08/Springboot-Postgresql-FastAutoGenerator-2/"
    >Springboot+Postgresql+FastAutoGenerator（二）</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/03/08/Springboot-Postgresql-FastAutoGenerator-2/" class="article-date">
  <time datetime="2023-03-08T07:04:40.000Z" itemprop="datePublished">2023-03-08</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>执行日志如下，SQL语句备用：</p>
<pre><code>14:55:09.076 [main] DEBUG com.baomidou.mybatisplus.generator.AutoGenerator - ==========================准备生成文件...==========================
14:55:10.014 [main] DEBUG com.baomidou.mybatisplus.generator.config.querys.PostgreSqlQuery - 执行SQL:

SELECT A.tablename, obj_description(relfilenode, &#39;pg_class&#39;) AS comments FROM pg_tables A, pg_class B WHERE A.schemaname=&#39;system&#39; AND A.tablename = B.relname AND tablename IN (&#39;sys_role_menu&#39;,&#39;sys_user_role&#39;,&#39;sys_user&#39;,&#39;sys_menu&#39;,&#39;sys_role&#39;)

14:55:10.029 [main] DEBUG com.baomidou.mybatisplus.generator.config.querys.PostgreSqlQuery - 返回记录数:5,耗时(ms):19
14:55:10.076 [main] DEBUG com.baomidou.mybatisplus.generator.config.querys.PostgreSqlQuery - 执行SQL:
SELECT
   A.attname AS name,format_type (A.atttypid,A.atttypmod) AS type,col_description (A.attrelid,A.attnum) AS comment,
     D.column_default,
   CASE WHEN length(B.attname) &gt; 0 THEN &#39;PRI&#39; ELSE &#39;&#39; END AS key
FROM
   pg_attribute A
LEFT JOIN (
    SELECT
        pg_attribute.attname
    FROM
        pg_index,
        pg_class,
        pg_attribute
    WHERE
        pg_class.oid =&#39;&quot;sys_menu&quot;&#39; :: regclass
    AND pg_index.indrelid = pg_class.oid
    AND pg_attribute.attrelid = pg_class.oid
    AND pg_attribute.attnum = ANY (pg_index.indkey)
) B ON A.attname = b.attname
INNER JOIN pg_class C on A.attrelid = C.oid
INNER JOIN information_schema.columns D on A.attname = D.column_name
WHERE A.attrelid =&#39;&quot;sys_menu&quot;&#39; :: regclass AND A.attnum&gt; 0 AND NOT A.attisdropped AND D.table_name = &#39;sys_menu&#39;
ORDER BY A.attnum;

14:55:10.107 [main] DEBUG com.baomidou.mybatisplus.generator.config.querys.PostgreSqlQuery - 返回记录数:10,耗时(ms):31
14:55:10.107 [main] DEBUG com.baomidou.mybatisplus.generator.config.querys.PostgreSqlQuery - 执行SQL:

SELECT
   A.attname AS name,format_type (A.atttypid,A.atttypmod) AS type,col_description (A.attrelid,A.attnum) AS comment,
     D.column_default,
   CASE WHEN length(B.attname) &gt; 0 THEN &#39;PRI&#39; ELSE &#39;&#39; END AS key
FROM
   pg_attribute A
LEFT JOIN (
    SELECT
        pg_attribute.attname
    FROM
        pg_index,
        pg_class,
        pg_attribute
    WHERE
        pg_class.oid =&#39;&quot;sys_role&quot;&#39; :: regclass
    AND pg_index.indrelid = pg_class.oid
    AND pg_attribute.attrelid = pg_class.oid
    AND pg_attribute.attnum = ANY (pg_index.indkey)
) B ON A.attname = b.attname
INNER JOIN pg_class C on A.attrelid = C.oid
INNER JOIN information_schema.columns D on A.attname = D.column_name
WHERE A.attrelid =&#39;&quot;sys_role&quot;&#39; :: regclass AND A.attnum&gt; 0 AND NOT A.attisdropped AND D.table_name = &#39;sys_role&#39;
ORDER BY A.attnum;

14:55:10.123 [main] DEBUG com.baomidou.mybatisplus.generator.config.querys.PostgreSqlQuery - 返回记录数:3,耗时(ms):5
14:55:10.123 [main] DEBUG com.baomidou.mybatisplus.generator.config.querys.PostgreSqlQuery - 执行SQL:

SELECT
   A.attname AS name,format_type (A.atttypid,A.atttypmod) AS type,col_description (A.attrelid,A.attnum) AS comment,
     D.column_default,
   CASE WHEN length(B.attname) &gt; 0 THEN &#39;PRI&#39; ELSE &#39;&#39; END AS key
FROM
   pg_attribute A
LEFT JOIN (
    SELECT
        pg_attribute.attname
    FROM
        pg_index,
        pg_class,
        pg_attribute
    WHERE
        pg_class.oid =&#39;&quot;sys_role_menu&quot;&#39; :: regclass
    AND pg_index.indrelid = pg_class.oid
    AND pg_attribute.attrelid = pg_class.oid
    AND pg_attribute.attnum = ANY (pg_index.indkey)
) B ON A.attname = b.attname
INNER JOIN pg_class C on A.attrelid = C.oid
INNER JOIN information_schema.columns D on A.attname = D.column_name
WHERE A.attrelid =&#39;&quot;sys_role_menu&quot;&#39; :: regclass AND A.attnum&gt; 0 AND NOT A.attisdropped AND D.table_name = &#39;sys_role_menu&#39;
ORDER BY A.attnum;

14:55:10.123 [main] DEBUG com.baomidou.mybatisplus.generator.config.querys.PostgreSqlQuery - 返回记录数:3,耗时(ms):5
14:55:10.139 [main] DEBUG com.baomidou.mybatisplus.generator.config.querys.PostgreSqlQuery - 执行SQL:

SELECT
   A.attname AS name,format_type (A.atttypid,A.atttypmod) AS type,col_description (A.attrelid,A.attnum) AS comment,
     D.column_default,
   CASE WHEN length(B.attname) &gt; 0 THEN &#39;PRI&#39; ELSE &#39;&#39; END AS key
FROM
   pg_attribute A
LEFT JOIN (
    SELECT
        pg_attribute.attname
    FROM
        pg_index,
        pg_class,
        pg_attribute
    WHERE
        pg_class.oid =&#39;&quot;sys_user&quot;&#39; :: regclass
    AND pg_index.indrelid = pg_class.oid
    AND pg_attribute.attrelid = pg_class.oid
    AND pg_attribute.attnum = ANY (pg_index.indkey)
) B ON A.attname = b.attname
INNER JOIN pg_class C on A.attrelid = C.oid
INNER JOIN information_schema.columns D on A.attname = D.column_name
WHERE A.attrelid =&#39;&quot;sys_user&quot;&#39; :: regclass AND A.attnum&gt; 0 AND NOT A.attisdropped AND D.table_name = &#39;sys_user&#39;
ORDER BY A.attnum;

14:55:10.139 [main] DEBUG com.baomidou.mybatisplus.generator.config.querys.PostgreSqlQuery - 返回记录数:11,耗时(ms):6
14:55:10.139 [main] DEBUG com.baomidou.mybatisplus.generator.config.querys.PostgreSqlQuery - 执行SQL:

SELECT
   A.attname AS name,format_type (A.atttypid,A.atttypmod) AS type,col_description (A.attrelid,A.attnum) AS comment,
     D.column_default,
   CASE WHEN length(B.attname) &gt; 0 THEN &#39;PRI&#39; ELSE &#39;&#39; END AS key
FROM
   pg_attribute A
LEFT JOIN (
    SELECT
        pg_attribute.attname
    FROM
        pg_index,
        pg_class,
        pg_attribute
    WHERE
        pg_class.oid =&#39;&quot;sys_user_role&quot;&#39; :: regclass
    AND pg_index.indrelid = pg_class.oid
    AND pg_attribute.attrelid = pg_class.oid
    AND pg_attribute.attnum = ANY (pg_index.indkey)
) B ON A.attname = b.attname
INNER JOIN pg_class C on A.attrelid = C.oid
INNER JOIN information_schema.columns D on A.attname = D.column_name
WHERE A.attrelid =&#39;&quot;sys_user_role&quot;&#39; :: regclass AND A.attnum&gt; 0 AND NOT A.attisdropped AND D.table_name = &#39;sys_user_role&#39;
ORDER BY A.attnum;

14:55:10.154 [main] DEBUG com.baomidou.mybatisplus.generator.config.querys.PostgreSqlQuery - 返回记录数:3,耗时(ms):5

14:55:10.373 [main] DEBUG com.baomidou.mybatisplus.generator.AutoGenerator - ==========================文件生成完成！！！==========================

Process finished with exit code 0
</code></pre>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PostgreSQL/" rel="tag">PostgreSQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Springboot-Postgresql-FastAutoGenerator-1"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/03/07/Springboot-Postgresql-FastAutoGenerator-1/"
    >Springboot+Postgresql+FastAutoGenerator（一）</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/03/07/Springboot-Postgresql-FastAutoGenerator-1/" class="article-date">
  <time datetime="2023-03-07T06:57:38.000Z" itemprop="datePublished">2023-03-07</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>Postgreql默认是public，需要手动指定schema。<br>URL指定schema也不行，必须单独构造一个DataSourceConfig.Builder进行指定。</p>
<pre><code>package com.goland.gis;

import com.baomidou.mybatisplus.generator.FastAutoGenerator;
import com.baomidou.mybatisplus.generator.config.DataSourceConfig;
import com.baomidou.mybatisplus.generator.config.OutputFile;
import com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;

import java.util.Collections;

public class CodeGenerator &#123;

    public static void main(String[] args) &#123;

        String url =&quot;jdbc:postgresql://localhost:5432/power?currentSchema=system&quot;;
        String username = &quot;postgres&quot;;
        String password = &quot;postgres&quot;;

        String moduleName = &quot;sys&quot;;
        String mapperLocation = &quot;E:\\Java\\work4\\grid\\gis\\src\\main\\resources\\mapper\\&quot; + moduleName;
        String tableNames = &quot;sys_user,sys_menu,sys_role,sys_role_menu,sys_user_role&quot;;

        DataSourceConfig.Builder builderOutSide = new DataSourceConfig.Builder(url, username, password);
        builderOutSide.schema(&quot;system&quot;);

        FastAutoGenerator.create(builderOutSide)
                .globalConfig(builder -&gt; &#123;
                    builder.author(&quot;zhangsmile1893&quot;) // 设置作者
                            //.enableSwagger() // 开启 swagger 模式
                            //.fileOverride() // 覆盖已生成文件
                            .outputDir(&quot;E:\\Java\\work4\\grid\\gis\\src\\main\\java&quot;); // 指定输出目录
                &#125;)
                .packageConfig(builder -&gt; &#123;
                    builder.parent(&quot;com.goland.gis&quot;) // 设置父包名
                            .moduleName(moduleName) // 设置父包模块名
                            .pathInfo(Collections.singletonMap(OutputFile.xml, mapperLocation)); // 设置mapperXml生成路径
                &#125;)
                .strategyConfig(builder -&gt; &#123;
                    builder.addInclude(tableNames) // 设置需要生成的表名
                            .addTablePrefix(&quot;sys_&quot;); // 设置过滤表前缀
                &#125;)
                .templateEngine(new FreemarkerTemplateEngine()) // 使用Freemarker引擎模板，默认的是Velocity引擎模板
                .execute();
    &#125;
&#125;
</code></pre>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PostgreSQL/" rel="tag">PostgreSQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-关于数据库模式切换问题"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/03/06/%E5%85%B3%E4%BA%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A8%A1%E5%BC%8F%E5%88%87%E6%8D%A2%E9%97%AE%E9%A2%98/"
    >关于数据库模式切换问题</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/03/06/%E5%85%B3%E4%BA%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A8%A1%E5%BC%8F%E5%88%87%E6%8D%A2%E9%97%AE%E9%A2%98/" class="article-date">
  <time datetime="2023-03-06T06:27:10.000Z" itemprop="datePublished">2023-03-06</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%83%A8%E7%BD%B2%E8%BF%90%E7%BB%B4/">部署运维</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>现在流行的数据库都有 Schema 的概念，一般作为数据库对象(表，函数，存储过程等)的命名空间。所以在数据库端往往存在实例/数据库/Schema 这样层级划分。对于DB2 和 Oracle 用客户端创建一个新的数据库并非易事，灵活的在数据库中较轻量的划分隔离空间的办法因数据库类型而异。</p>
<p>MySQL： Mysql 的体系架构是单实例多库，一个用户可以访问多个数据库，然后指定当前数据库写 SQL 的时候就不用带上数据库名，MySQL 中 database 和 schema是一个概念，它靠 database 来隔离数据库对象。创建数据库(create database)，create schema 是 create database 的别名。</p>
<p>PostgreSQL： create database 创建新的数据库，或在当前数据库下用 create schema 创建 schema。PostgreSQL 的函数或存储过程中对未指定 schema 的数据库对象的访问的规则是在调用时动态绑定到当前会话中的 schema。</p>
<p>达梦 8： 达梦的体系架构是单库多实例的，也就是没有多个数据库的概念，从 Mysql转到达梦，就需要建多个用户+表空间来对应 Mysql的多个数据库。每个用户有一个默认的同名的模式，访问自己模式下的表、视图等不需要加模式名，访问其他模式下的对象需要加上模式名。</p>
<p>Oracle： create schema 较麻烦，涉及到 authorization。但可以通过 create user 创建新用户后就有了对应的新 schema。Oracle 中采取用户来隔离数据库对象。</p>
<p>实际应用过程中研发交付团队可能使用模式来进行租户间的数据隔离或根据业务功能划分不同的模式，这里就涉及一个服务需要同时连接并查询多种模式的问题，<br>一种方案是直接在 sql 中的表名前添加模式名前缀，这种适合一句 sql 需要跨多个模式进行联合查询的场景，属于定制型 sql。<br>一种方案是在会话层面指定模式，这样 sql中的表名不需要指定默认的前缀，对于不在当前模式下的表才需要添加模式前缀，这种适合多模式下相同表名存储数据的切换。</p>
<p>MySQL 的连接串直接指定具体数据库，其实已经是会话层面的模式切换</p>
<p>PostgreSQL 的连接串在没有指定当前模式下，例如<br>jdbc:postgresql://localhost:5432/postgresql 默认使用的是 postgresql 数据库的 public模式。</p>
<p>PostgreSQL 从 9.4 版本开始通过关键字 currentSchema 指定模式<br>jdbc:postgresql://localhost:5432/postgresql?currentSchema=myschema</p>
<p>旧版本通过 searchpath 指定<br>jdbc:postgresql://localhost:5432/postgresql?searchpath=myschema</p>
<p>达梦 8 的连接串在没有指定当前模式时，使用的是与用户同名的模式，可通过scheme 指定当前模式，例如：<br>jdbc:dm://localhost:5236?schema=myschema</p>
<p>————————————————<br>版权声明：本文为CSDN博主「雪影风痕」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_48805880/article/details/128385835">https://blog.csdn.net/m0_48805880/article/details/128385835</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PostgreSQL/" rel="tag">PostgreSQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/47/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/46/">46</a><a class="page-number" href="/page/47/">47</a><span class="page-number current">48</span><a class="page-number" href="/page/49/">49</a><a class="page-number" href="/page/50/">50</a><span class="space">&hellip;</span><a class="page-number" href="/page/58/">58</a><a class="extend next" rel="next" href="/page/49/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2022-2024
        <i class="ri-heart-fill heart_icon"></i> paladin1893
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="帕拉丁的游鱼"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>